./configure && make

case $(uname) in
  Darwin) CXXFLAGS='-dynamiclib -Wall -D__MACOSX_CORE__ RtMidi.cpp RtMidi-C-Api.cpp -framework CoreMIDI -framework CoreAudio -framework CoreFoundation' SHLIB=librtmidi.dylib ;;
	Linux) CXXFLAGS='-shared -fPIC -Wall -D__LINUX_ALSA__ -o RtMidi.cpp RtMidi-C-Api.cpp -lasound -lpthread' SHLIB=librtmidi.so ;;
	*) echo Unsupported OS:  $(uname) >&2 ; exit 1 ;;
esac

g++ $CXXFLAGS -o $SHLIB

echo "moving the shared lib into /usr/local/lib"

mv $SHLIB /usr/local/lib